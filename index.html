<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valais Cycling Map</title>
    <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        #map {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
    <script>
        // Initialize the map
        const map = new maplibregl.Map({
            container: 'map', // ID of the map container
            style: 'https://vectortiles.geo.admin.ch/styles/ch.swisstopo.lightbasemap.vt/style.json',
            center: [7.5, 46.2], // Center of Valais region
            zoom: 9 // Initial zoom level
        });

        // Add navigation controls
        map.addControl(new maplibregl.NavigationControl());

        // Load the GeoJSON data
        const geojsonData ={
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "name": "Illiez Bike Club",
                "site web": "www.illiezbikeclub.ch",
                "Contact": "illiez.bike.club@gmail.com",
                "marker-color": "#c80000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "id": "illiez-bike-club"
            },
            "geometry": {
                "coordinates": [
                    6.861166357596886,
                    46.16306496779691
                ],
                "type": "Point"
            },
            "id": 0
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Union Cycliste Montheysanne ",
                "marker-color": "#c80000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "Site web": "http://www.ucmonthey.ch",
                "id": "union-cycliste-montheysanne"
            },
            "geometry": {
                "coordinates": [
                    6.946552284674937,
                    46.25359360922974
                ],
                "type": "Point"
            },
            "id": 1
        },
        {
            "type": "Feature",
            "properties": {
                "Cyclophile Sédunois": "",
                "marker-color": "#e60000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "id": "cyclophile-sedunois"
            },
            "geometry": {
                "coordinates": [
                    7.3579660229961235,
                    46.23290284473126
                ],
                "type": "Point"
            },
            "id": 2
        },
        {
            "type": "Feature",
            "properties": {
                "marker-color": "#e60000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "VC Excelsior Martigny": "",
                "id": "vc-excelsior-martigny"
            },
            "geometry": {
                "coordinates": [
                    7.070980773779354,
                    46.10215290789503
                ],
                "type": "Point"
            },
            "id": 5
        },
        {
            "type": "Feature",
            "properties": {
                "BMX Club Sion": "",
                "marker-color": "#e60000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "id": "bmx-club-sion"
            },
            "geometry": {
                "coordinates": [
                    7.32229615432928,
                    46.22032785047594
                ],
                "type": "Point"
            },
            "id": 7
        },
        {
            "type": "Feature",
            "properties": {
                "Bike Club Verbier": "",
                "marker-color": "#e60000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "id": "bike-club-verbier"
            },
            "geometry": {
                "coordinates": [
                    7.228980686885734,
                    46.096061611451915
                ],
                "type": "Point"
            },
            "id": 8
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "GX Team",
                "marker-color": "#c80000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "Site web": "https://www.strava.com/clubs/205495",
                "id": "gx-team"
            },
            "geometry": {
                "coordinates": [
                    6.8537372010126205,
                    46.38487455565226
                ],
                "type": "Point"
            },
            "id": 12
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Mountain Athletes",
                "Site web": "https://mountainathletes.ch/kontakt/",
                "marker-color": "#e60000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "id": "mountain-athletes"
            },
            "geometry": {
                "coordinates": [
                    7.98767125078092,
                    46.315769646868944
                ],
                "type": "Point"
            },
            "id": 11
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Team Hérens",
                "Siteweb": "https://team-herens.ch/",
                "marker-color": "#e60000",
                "marker-size": "medium",
                "marker-symbol": "circle",
                "id": "team-herens"
            },
            "geometry": {
                "coordinates": [
                    7.3982645649541325,
                    46.21145940516985
                ],
                "type": "Point"
            },
            "id": 14
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "VTT Club Crans Montana",
                "id": "vtt-club-crans-montana"
            },
            "geometry": {
                "coordinates": [
                    7.4692264724144195,
                    46.30346878681658
                ],
                "type": "Point"
            },
            "id": 15
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "VTT Kids Crans-Montana",
                "id": "vtt-kids-crans-montana"
            },
            "geometry": {
                "coordinates": [
                    7.47750611366132,
                    46.31110592478774
                ],
                "type": "Point"
            },
            "id": 16
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Rhône Biker",
                "id": "rhone-biker"
            },
            "geometry": {
                "coordinates": [
                    8.063285782707567,
                    46.39225210010807
                ],
                "type": "Point"
            },
            "id": 15
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Trail Goat",
                "id": "trail-goat"
            },
            "geometry": {
                "coordinates": [
                    7.975997373018856,
                    46.309717294475234
                ],
                "type": "Point"
            },
            "id": 16
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Ride On: Action Sports Academy",
                "id": "ride-on-action-sports-academy"
            },
            "geometry": {
                "coordinates": [
                    7.46944591534529,
                    46.30105246944919
                ],
                "type": "Point"
            },
            "id": 17
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Bike Kollektiv",
                "id": "bike-kollektiv"
            },
            "geometry": {
                "coordinates": [
                    7.986074805128283,
                    46.32211891803729
                ],
                "type": "Point"
            },
            "id": 18
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Crossroad Kids Bike Club",
                "id": "crossroad-kids-bike-club"
            },
            "geometry": {
                "coordinates": [
                    7.088443626984429,
                    46.10051525127412
                ],
                "type": "Point"
            },
            "id": 19
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Mont Noble Bike Club",
                "id": "mont-noble-bike-club"
            },
            "geometry": {
                "coordinates": [
                    7.428460986344305,
                    46.22830422175022
                ],
                "type": "Point"
            },
            "id": 20
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Snow & Bike School Bellwald",
                "id": "snow-bike-school-bellwald"
            },
            "geometry": {
                "coordinates": [
                    8.159299402963683,
                    46.42345348879218
                ],
                "type": "Point"
            },
            "id": 21
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Association Anniviarde Mountain Bike",
                "id": "association-anniviarde-mountain-bike"
            },
            "geometry": {
                "coordinates": [
                    7.585344021300415,
                    46.21533261946519
                ],
                "type": "Point"
            },
            "id": 22
        },
        {
            "type": "Feature",
            "properties": {
                "Name": "Anzère Bike Club",
                "id": "anzere-bike-club"
            },
            "geometry": {
                "coordinates": [
                    7.397435109334225,
                    46.29624351156846
                ],
                "type": "Point"
            },
            "id": 23
        }
    ]
};
        // Add the GeoJSON data as a source
        map.on('load', () => {
            map.addSource('cycling-data', {
                type: 'geojson',
                data: geojsonData
            });

            // Add a layer to display the points
            map.addLayer({
                id: 'cycling-points',
                type: 'circle',
                source: 'cycling-data',
                paint: {
                    'circle-radius': 6,
                    'circle-color': ['get', 'marker-color']
                }
            });

            // Add popups on click
            map.on('click', 'cycling-points', (e) => {
                const coordinates = e.features[0].geometry.coordinates.slice();
                const properties = e.features[0].properties;
                const name = properties.name || 'Unknown';
                const website = properties['site web'] || 'No website available';
                const contact = properties.Contact || 'No contact available';
                const logo = 'logos/'+properties.id+'.png' || '';

                new maplibregl.Popup()
                    .setLngLat(coordinates)
                    .setHTML(`<strong>${name}</strong><br>
                              Website: <a href="http://${website}" target="_blank">${website}</a><br>
                              Contact: ${contact}<br>
                              ${logo ? `<img src="${logo}" alt="${name} logo" style="width:100px;">` : ''}`)
                    .addTo(map);
            });

            // Change cursor to pointer on hover
            map.on('mouseenter', 'cycling-points', () => {
                map.getCanvas().style.cursor = 'pointer';
            });

            map.on('mouseleave', 'cycling-points', () => {
                map.getCanvas().style.cursor = '';
            });
        });
    </script>
</body>
</html>